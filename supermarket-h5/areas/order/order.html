<ion-view id="order" view-title="确认订单" hide-back-button="true" cache-view="false">
  <ion-content class="scroll-content  has-header" scroll="false">
    <div class="wrapper" id="wrapper">
      <div class="confirm">
        <div class="row" id="consignee">
          <div class="lc">收件人</div>
          <!--<div >-->
              <div class="rc" onclick="popCsnList()" ng-if="consignee != null">
                <div class="unfold fr"><i class="iconfont">&#xe614;</i></div>
                <h4 class="c666" data-id="{{consignee.id}}">{{consignee.receivingUserName}}<span class="ml10">{{consignee.mobile}}</span></h4>
                <p class="mt5 c888">{{consignee.provinceName}}{{consignee.cityName}}{{consignee.area}}{{consignee.receivingAddress}}</p>
              </div>
            <!--</div>-->
          <!--<div ng-if="consignee == null">-->
            <div ng-if="consignee == null" class="rc" onclick="popCsnList()"><a class="add" onclick="addCsn()">+ 添加收件人</a></div>
          <!--</div>-->
        </div>
        <div class="parcel row" id="parcel">
          <div class="lc">包裹清单</div>
          <div class="rc">
            <ul class="gli" id="gli">
              <li ng-repeat="item in order.items">
                <div class="im"><img alt="{{item.productName}}" src="{{item.listImg}}"/></div>
                <div class="info">
                  <p class="name">{{item.productName}}</p>
                  <p class="subtotal mt5 c666"><span class="price mr10"><i class="cny">¥</i><font class="f14">{{item.price}}</font></span>×<b class="q">{{item.number}}</b></p>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="memos row">
          <div class="lc">留言备注</div>
          <div class="rc"><textarea name="memos" class="vtextarea" id="memos" placeholder="填写您对订单需要备注的内容，没有请留空"></textarea></div>
        </div>
        <div class="amount">
          <h3 class="f14 center">订单合计</h3>
          <dl>
            <dt>商品合计:</dt>
            <dd class="c666"><i class="cny">¥</i><font class="f14" id="goods-amount">{{order.total}}</font></dd>
          </dl>
          <dl>
            <dt>运费:</dt>
            <dd class="c666"><i class="cny">¥</i><font class="f14" id="shipping-amount">0.00</font></dd>
          </dl>
          <dl class="totals">
            <dt class="f14">共计:</dt>
            <dd class="f18"><i class="cny">¥</i><font id="total-amount">{{order.total}}</font></dd>
          </dl>
        </div>
        <div class="submit mt20"><a class="f14 xauto center" onClick="submitOrder()">提交订单</a></div>
      </div>
    </div>

    <!-- 收件人列表开始 -->
    <div class="csnli poper hide" id="csnli">
      <!--<div class="header">
        <div class="op lt"><a onclick="hideCsnList()"><i class="f20 iconfont">&#xe602;</i></a></div>
        <h2>选择收件人</h2>
      </div>-->
      <div class="opts module">
        <dl id="csnopt-{{item.id}}" ng-class="{'checked':item.isDefault}" ng-repeat="item in consigneeList">
        <dd class="l" onclick="onChangeCsn(this)"><i class="iconfont">&#xe61a;</i></dd>
        <dd class="r" data-json='' onclick="editCsn(this)"><i class="iconfont">&#xe617;</i></dd>
        <dd class="m">
          <h4 class="c666" data-id="{{item.id}}">{{item.receivingUserName}}<span class="ml10">{{item.mobile}}</span></h4>
          <p class="mt5 c888">{{item.provinceName}}{{item.cityName}}{{item.area}}{{item.receivingAddress}}</p>
        </dd>
        </dl>
        <a class="add" onclick="addCsn()">+ 添加收件人</a>
      </div>
    </div>
    <!-- 收件人列表结束 -->
    <!-- 收件人表单开始 -->
    <div class="csnform hide" id="csnform" style="width: 100%;">
      <form><div class="main cut"></div></form>
      <a class="submit act xauto mt15" onclick="saveCsnForm()">保 存</a>
    </div>
    <!-- 收件人表单结束 -->
    <script type="text/template" id="csn-form-tpl">
      <input type="hidden" name="id" value="0" />
      <dl><dt>收件人</dt><dd><input name="receiver" type="text" class="vinput"></dd></dl>
      <dl><dt>手机号码</dt><dd><input name="mobile" type="number" pattern="[0-9]*" class="vinput"></dd></dl>
      <dl>
        <dt>选择省份</dt>
        <dd>
          <div class="vslt">
            <select name="province" id="areaslt-province" data-type="province" onchange="getAreaSelect('province')">
              <option value="">选择省份</option>
            </select>
            <span><i class="iconfont">&#xe615;</i></span>
          </div>
        </dd>
      </dl>
      <dl>
        <dt>选择城市</dt>
        <dd>
          <div class="vslt">
            <select name="city" id="areaslt-city" onchange="getAreaSelect('city')">
              <option value="">选择城市</option>
            </select>
            <span><i class="iconfont">&#xe615;</i></span>
          </div>
        </dd>
      </dl>
      <dl>
        <dt>选择区/县</dt>
        <dd>
          <div class="vslt">
            <select name="borough" id="areaslt-borough">
              <option value="">选择区/县</option>
            </select>
            <span><i class="iconfont">&#xe615;</i></span>
          </div>
        </dd>
      </dl>
      <dl><dt>详细地址</dt><dd><textarea name="address" class="vtextarea"></textarea></dd></dl>
    </script>
  </ion-content>
</ion-view>