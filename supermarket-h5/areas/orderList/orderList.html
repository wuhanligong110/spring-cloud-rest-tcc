<ion-view id="goodsList" view-title="商品列表页" hide-back-button="true" cache-view="false">
  <ion-content class="scroll-content">
    <!-- 产品部分 -->
    <ion-refresher pulling-text="亲爱滴！马上为您加载最新商品..." refreshing-text="loading..." on-refresh="func_refreshGoodsList()"></ion-refresher>

    <div class="orderli module cut" id="orders" data-cur="1" data-next="1">
      {@each list as v}
      <div class="item" ng-repeat="item in orderList">
        <div class="th c666"><span class="fr">{{item.progress}}</span><font class="mr5">订单号:</font><b>{{item.orderId}}</b></div>
        {@each v.goods_list as vv}
        <div class="goods">
          <a class="im" href="<{url c='mobile/goods' a='index' id='${vv.goods_id}'}>"><img src="<{$common.baseurl}>/upload/goods/prime/100x100/${vv.goods_image}" /></a>
          <div class="info">
            <p><a href="<{url c='mobile/goods' a='index' id='${vv.goods_id}'}>">${vv.goods_name}</a></p>
            {@if vv.goods_opts != null}
            <p class="c999 mt5">{@each vv.goods_opts as o}<span class="mr10">${o.opt_type}: [<font class="c666">${o.opt_text}</font>]</span>{@/each}</p>
            {@/if}
            <p class="mt5">
              <font class="c999 mr5">单价:</font><i class="cny">¥</i>${vv.goods_price}<span class="sep10"></span><font class="c999 mr5">数量:</font>${vv.goods_qty}
            </p>
          </div>
        </div>
        {@/each}
        <div class="total"><font class="mr5">总额:</font><span class="red"><i class="cny">¥</i><font class="f14">${v.order_amount}</font></span><span class="ml5 c999">(含运费：<i class="cny">¥</i>${v.shipping_amount})</span></div>
        <div class="act">
          <a href="<{url c='mobile/order' a='view' id='${v.order_id}'}>">查看详细</a>
          {@if v.order_status == 0}
          <a class="b1" href="<{url c='mobile/order' a='rebuy' id='${v.order_id}'}>">重新购买</a>
          {@else if v.order_status == 1}
          {@if v.payment_method != 2}<a class="b1" href="<{url c='mobile/pay' a='index' order_id='${v.order_id}'}>">立即付款</a>{@/if}
          <a class="b2" href="<{url c='mobile/order' a='cancel' id='${v.order_id}'}>">取消订单</a>
          {@else if v.order_status == 3}
          <a class="b1" href="<{url c='mobile/order' a='delivered' id='${v.order_id}'}>">确认签收</a>
          {@else if v.order_status == 4}
          <a class="b1" href="<{url c='mobile/review' a='order' order_id='${v.order_id}'}>">评价</a>
          <a class="b2" href="<{url c='mobile/aftersales' a='order' order_id='${v.order_id}'}>">售后</a>
          {@/if}
        </div>
      </div>
      {@/each}
    </div>

    <div ng-hide="pms_isMoreItemsAvailable" style="text-align: center">
      <span>见底了！</span>
    </div>
    <ion-infinite-scroll ng-if="pms_isMoreItemsAvailable" on-infinite="func_loadMoreGoodsList()" distance="1%" immediate-check="false">
    </ion-infinite-scroll>
  </ion-content>
</ion-view>
